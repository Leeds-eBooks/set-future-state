// @flow

// eslint-disable-next-line no-unused-vars
import {Component, PureComponent} from 'react'

type Eventual<E, V> = Future<E, V> | (() => Promise<V>)
type Reducer<V, P, S> = (value?: V, prevState: S, props: P) => $Shape<S> | null
type OnError<E> = E => void
type Cancels = Array<() => void>

declare export class ComponentFutureState<P, S> extends Component<P, S> {
  _cancels: Cancels;

  setFutureState<E, V>(
    eventual: Eventual<E, V>,
    reducer: Reducer<V, P, S>,
    onError?: OnError<E>
  ): void;
}

declare export class PureComponentFutureState<P, S> extends PureComponent<
  P,
  S
> {
  _cancels: Cancels;

  setFutureState<E, V>(
    eventual: Eventual<E, V>,
    reducer: Reducer<V, P, S>,
    onError?: OnError<E>
  ): void;
}
